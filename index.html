<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volvo ·Éí·Éê·Éú·É†·Éò·Éí·Éò</title>
    
    <!-- Favicon linking -->
    <link rel="icon" href="1.png" type="image/png">
    
    <!-- Web App Manifest linking -->
    <link rel="manifest" href="manifest.json">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #1e3a8a;
            --work-day: #22c55e;
            --rest-day: #ffffff;
            --past-work-day: #ef4444;
            --past-rest-day: #fef08a;
            --text-color: #1f2937;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #f3f4f6, #bfdbfe);
            min-height: 100vh;
            padding: 10px;
            color: var(--text-color);
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 10px;
        }

        h1 {
            font-size: 1.8rem;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .message-container {
            background: white;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            font-weight: 500;
            text-align: center;
            font-size: 1rem;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
            flex: 1;
            max-width: 120px;
            text-align: center;
        }

        .nav-button:active {
            background: #1e40af;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .date-cell {
            padding: 10px;
            text-align: center;
            border-radius: 6px;
            font-size: 0.85rem;
            line-height: 1.4;
            transition: transform 0.2s;
        }

        .date-cell:active {
            transform: scale(0.95);
        }

        .green {
            background-color: var(--work-day);
            color: white;
        }

        .white {
            background-color: var(--rest-day);
            color: var(--text-color);
        }

        .past-green {
            background-color: var(--past-work-day);
            color: white;
        }

        .past-white {
            background-color: var(--past-rest-day);
            color: var(--text-color);
        }

        .weekday-header {
            font-weight: bold;
            text-align: center;
            padding: 8px;
            color: var(--primary-color);
            font-size: 0.85rem;
        }

        /* Mobile Styles */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.4rem;
            }

            .calendar {
                grid-template-columns: repeat(2, 1fr); /* 2 columns for mobile */
                gap: 4px;
                padding: 8px;
            }

            .date-cell {
                padding: 8px;
                font-size: 0.8rem;
            }

            .weekday-header {
                font-size: 0.75rem;
                padding: 6px;
            }

            .message-container {
                font-size: 0.9rem;
                padding: 8px;
            }

            .nav-button {
                padding: 6px 12px;
                font-size: 0.8rem;
                max-width: 100px;
            }
        }

        @media (max-width: 400px) {
            .calendar {
                grid-template-columns: 1fr; /* 1 column for very small screens */
            }

            .weekday-header {
                display: none; /* Hide weekday headers on very small screens */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Volvo ·Éí·Éê·Éú·É†·Éò·Éí·Éò</h1>
        <div class="message-container" id="message"></div>
        <div class="navigation">
            <button class="nav-button" onclick="prevMonth()">·É¨·Éò·Éú·Éê ·Éó·Éï·Éî</button>
            <span id="current-month"></span>
            <button class="nav-button" onclick="nextMonth()">·É®·Éî·Éõ·Éì·Éî·Éí·Éò ·Éó·Éï·Éî</button>
        </div>
        <div class="calendar" id="calendar"></div>
    </div>

<script>
    // Service Worker Registration
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js')
            .then(registration => {
                console.log('Service Worker registered:', registration);
                if (registration.waiting) {
                    registration.waiting.postMessage({ type: 'SKIP_WAITING' });
                }
                registration.addEventListener('updatefound', () => {
                    const newWorker = registration.installing;
                    newWorker.addEventListener('statechange', () => {
                        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                            console.log('New version available. Reloading...');
                            window.location.reload();
                        }
                    });
                });
            })
            .catch(error => {
                console.error('Service Worker registration failed:', error);
            });
    }

    // Calendar Logic
    const months = ["·Éò·Éê·Éú·Éï·Éê·É†·Éò", "·Éó·Éî·Éë·Éî·É†·Éï·Éê·Éö·Éò", "·Éõ·Éê·É†·É¢·Éò", "·Éê·Éû·É†·Éò·Éö·Éò", "·Éõ·Éê·Éò·É°·Éò", "·Éò·Éï·Éú·Éò·É°·Éò", "·Éò·Éï·Éö·Éò·É°·Éò", "·Éê·Éí·Éï·Éò·É°·É¢·Éù", "·É°·Éî·É•·É¢·Éî·Éõ·Éë·Éî·É†·Éò", "·Éù·É•·É¢·Éù·Éõ·Éë·Éî·É†·Éò", "·Éú·Éù·Éî·Éõ·Éë·Éî·É†·Éò", "·Éì·Éî·Éô·Éî·Éõ·Éë·Éî·É†·Éò"];
    const weekdays = ["·Éô·Éï·Éò", "·Éù·É†·É®", "·É°·Éê·Éõ", "·Éù·Éó·ÉÆ", "·ÉÆ·É£·Éó", "·Éû·Éê·É†", "·É®·Éê·Éë"];
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    function generateCalendar() {
        const calendarContainer = document.getElementById("calendar");
        const messageContainer = document.getElementById("message");
        const currentMonthDisplay = document.getElementById("current-month");
        calendarContainer.innerHTML = '';

        // Add weekday headers
        if (window.innerWidth > 400) { // Show headers only for larger screens
            weekdays.forEach(day => {
                const header = document.createElement("div");
                header.classList.add("weekday-header");
                header.innerText = day;
                calendarContainer.appendChild(header);
            });
        }

        // Calculate dates
        const startDate = new Date(currentYear, currentMonth, 1);
        const endDate = new Date(currentYear, currentMonth + 1, 0);
        const currentDateObj = new Date();
        const tomorrowDateObj = new Date(currentDateObj);
        tomorrowDateObj.setDate(currentDateObj.getDate() + 1);

        // Set current month display
        currentMonthDisplay.innerText = `${months[currentMonth]} ${currentYear}`;

        // Add empty cells for days before the 1st
        const firstDay = startDate.getDay();
        for (let i = 0; i < firstDay; i++) {
            const emptyCell = document.createElement("div");
            calendarContainer.appendChild(emptyCell);
        }

        let dayCount = 0;
        let currentDate = new Date(startDate);

        while (currentDate <= endDate) {
            const dateCell = document.createElement("div");
            dateCell.classList.add("date-cell");

            // Work/rest day logic
            if (Math.floor(dayCount / 2) % 2 === 0) {
                dateCell.classList.add("green");
            } else {
                dateCell.classList.add("white");
            }

            const day = currentDate.getDate();
            const weekday = weekdays[currentDate.getDay()];
            dateCell.innerText = `${day}\n${weekday}`;

            // Past days
            if (currentDate < currentDateObj) {
                if (dateCell.classList.contains("green")) {
                    dateCell.classList.remove("green");
                    dateCell.classList.add("past-green");
                } else if (dateCell.classList.contains("white")) {
                    dateCell.classList.remove("white");
                    dateCell.classList.add("past-white");
                }
            }

            // Tomorrow message
            if (
                currentDate.getFullYear() === tomorrowDateObj.getFullYear() &&
                currentDate.getMonth() === tomorrowDateObj.getMonth() &&
                currentDate.getDate() === tomorrowDateObj.getDate()
            ) {
                messageContainer.innerHTML = dateCell.classList.contains("green")
                    ? "·ÉÆ·Éï·Éê·Éö ·Éõ·É£·É®·Éê·Éù·Éë üò±"
                    : "·ÉÆ·Éï·Éê·Éö ·Éê·É† ·Éõ·É£·É®·Éê·Éù·Éë üòçü•≥";
            }

            calendarContainer.appendChild(dateCell);
            currentDate.setDate(currentDate.getDate() + 1);
            dayCount++;
        }
    }

    function prevMonth() {
        currentMonth--;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        }
        generateCalendar();
    }

    function nextMonth() {
        currentMonth++;
        if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }
        generateCalendar();
    }

    // Initial calendar generation
    generateCalendar();

    // Update calendar on window resize
    window.addEventListener('resize', generateCalendar);
</script>
</body>
</html>
